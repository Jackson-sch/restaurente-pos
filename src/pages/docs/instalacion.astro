---
import DocsLayout from "../../layouts/DocsLayout.astro";
import Callout from "../../components/docs/Callout.astro";
---

<DocsLayout title="Instalación - Documentación">
  <h1>Guía de Instalación</h1>

  <p class="lead">
    Configura tu entorno de desarrollo o producción en pocos pasos.
  </p>

  <Callout type="info" title="Prerrquisitos">
    Asegúrate de tener instalado <strong>Node.js 20+</strong> (o Bun 1.0+) y una instancia
    de <strong>PostgreSQL</strong> activa.
  </Callout>

  <h2>1. Obtener el Código</h2>

  <p>Clona el repositorio oficial desde GitHub:</p>

  <pre><code>git clone https://github.com/Jackson-sch/sistema-restaurante.git
cd sistema-restaurante</code></pre>

  <h2>2. Instalar Dependencias</h2>

  <p>
    Recomendamos usar <strong>Bun</strong> por su velocidad, pero npm funciona perfectamente.
  </p>

  <div class="grid md:grid-cols-2 gap-4 not-prose">
    <div class="bg-[#1e293b] p-4 rounded-lg border border-white/5">
      <div
        class="text-xs text-slate-500 mb-2 uppercase font-bold tracking-wider"
      >
        Con Bun (Recomendado)
      </div>
      <code class="text-green-400 font-mono text-sm">bun install</code>
    </div>
    <div class="bg-[#1e293b] p-4 rounded-lg border border-white/5">
      <div
        class="text-xs text-slate-500 mb-2 uppercase font-bold tracking-wider"
      >
        Con NPM
      </div>
      <code class="text-blue-400 font-mono text-sm">npm install</code>
    </div>
  </div>

  <h2>3. Configuración de Entorno</h2>

  <p>Duplica el archivo de ejemplo y configura tus secretos.</p>

  <pre><code>cp env-template.txt .env.local</code></pre>

  <Callout type="warning" title="Seguridad">
    Nunca subas tu archivo <code>.env.local</code> al repositorio. Contiene claves
    privadas de base de datos y autenticación.
  </Callout>

  <h3>Variables Críticas</h3>

  <div class="not-prose my-6 space-y-4">
    <!-- Variable 1 -->
    <div
      class="flex flex-col md:flex-row gap-4 p-4 rounded-xl border border-white/5 bg-[#1e293b]/30"
    >
      <div class="md:w-1/3">
        <div
          class="flex items-center gap-2 text-primary-400 font-mono text-sm font-bold"
        >
          DATABASE_URL
        </div>
        <span class="text-xs text-slate-500 uppercase tracking-wider mt-1 block"
          >Conexión DB</span
        >
      </div>
      <div class="md:w-2/3">
        <p class="text-sm text-slate-300 mb-2">
          String de conexión a tu base de datos PostgreSQL.
        </p>
        <div
          class="flex items-center gap-2 bg-[#0f172a] rounded px-3 py-2 border border-white/5 font-mono text-xs text-slate-400 overflow-x-auto"
        >
          postgresql://user:pass@localhost:5432/db
        </div>
      </div>
    </div>

    <!-- Variable 2 -->
    <div
      class="flex flex-col md:flex-row gap-4 p-4 rounded-xl border border-white/5 bg-[#1e293b]/30"
    >
      <div class="md:w-1/3">
        <div
          class="flex items-center gap-2 text-primary-400 font-mono text-sm font-bold"
        >
          AUTH_SECRET
        </div>
        <span class="text-xs text-slate-500 uppercase tracking-wider mt-1 block"
          >Seguridad</span
        >
      </div>
      <div class="md:w-2/3">
        <p class="text-sm text-slate-300 mb-2">
          Clave secreta para firmar tokens de sesión.
        </p>
        <div
          class="flex items-center justify-between gap-2 bg-[#0f172a] rounded px-3 py-2 border border-white/5"
        >
          <span class="font-mono text-xs text-slate-400"
            >bunx prisma generate</span
          >
          <span
            class="text-[10px] bg-primary-500/20 text-primary-400 px-1.5 py-0.5 rounded cursor-help"
            title="Ejecuta esto en tu terminal para generar">Generar</span
          >
        </div>
      </div>
    </div>
  </div>

  <h2>4. Base de Datos</h2>

  <p>Inicializa el esquema y carga los datos semilla.</p>

  <pre><code>bunx prisma generate
bunx prisma db push
bunx prisma db seed</code></pre>

  <Callout type="note" title="Datos de Prueba">
    El comando <code>db seed</code> creará un usuario administrador por defecto y
    datos de ejemplo para que puedas probar el sistema inmediatamente.
  </Callout>

  <h2>5. Ejecutar</h2>

  <pre><code>bun run dev</code></pre>

  <div class="mt-8 not-prose">
    <div
      class="p-6 rounded-2xl bg-gradient-to-br from-[#1e293b]/50 to-[#0f172a]/50 border border-emerald-500/20 shadow-lg shadow-emerald-500/5 relative overflow-hidden group"
    >
      <div
        class="absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="w-32 h-32 text-emerald-500"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          ><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline
            points="22 4 12 14.01 9 11.01"></polyline></svg
        >
      </div>

      <h3 class="text-xl font-bold text-white mb-2 flex items-center gap-2">
        <span
          class="flex items-center justify-center w-8 h-8 rounded-full bg-emerald-500/20 text-emerald-400"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg
          >
        </span>
        ¡Instalación Completada!
      </h3>
      <p class="text-slate-400 mb-6 max-w-md">
        Tu sistema de facturación y gestión de restaurantes está listo para
        usar.
      </p>

      <a
        href="http://localhost:3000"
        target="_blank"
        class="inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-emerald-500 hover:bg-emerald-600 text-white font-bold transition-all hover:shadow-lg hover:shadow-emerald-500/20 transform hover:-translate-y-0.5"
      >
        Abrir RestaurantePOS
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="w-4 h-4"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          ><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
          ></path><polyline points="15 3 21 3 21 9"></polyline><line
            x1="10"
            x2="21"
            y1="14"
            y2="3"></line></svg
        >
      </a>
    </div>
  </div>
</DocsLayout>
